<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" width="955" height="600" xmlns:local="*"
			   creationComplete="application1_creationCompleteHandler(event)" xmlns:instruments="instruments.*" xmlns:grid="grid.*">
	
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			public static const rb:Roundabout = new Roundabout();			

			protected function updateDimBtn_clickHandler(event:MouseEvent):void
			{
				
				//squareGrid = new grid.SquareGrid();
				//squareGrid.init(parseInt(gridWidth.text), parseInt(gridHeight.text));
				
				//scroller.viewport = squareGrid;
				
			}
//			
			protected function application1_creationCompleteHandler(event:FlexEvent):void
			{
				//squareGrid.init(10,10);
				gridWidth.text = "25";
				gridHeight.text = "25";
				
				//ddl.setStyle('icon', TrafficLightColour.RED_ICON);
				
				//changeInstrument(SELECT);
				
			}
	
			protected function onCellSelected(event:Event):void
			{
				//trace('cell selected'+);
				//cellProp.selectedCell = squareGrid.selectedCell;
			}
			
//			
			protected function onSaveClick(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				var MyFile:FileReference = new FileReference();
				MyFile.save("abc", "data.map");
			}
//			
			protected function onChangeInstrument(event:Event):void
			{
				trace('instrument change in model');
				//squareGrid.instrument = instrPane.currentInstrumentId;
				//testCell.temp = !testCell.temp;
				//squareGrid.setStyle("side", 25);
			}
			
			
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<s:HGroup paddingTop="10" paddingLeft="10">
		<s:Scroller id="scroller" width="501" height="551">
			<!--<local:SquareGrid id="squareGrid" cellSelected="onCellSelected(event)"/>-->
			<grid:AdvancedGrid widthInCells="10" heightInCells="10" cellSide="25" />
		</s:Scroller>
<!--		<grid:SquareGrid id="squareGrid" cellSide="25" cellSelected="onCellSelected(event)" includeInLayout="false" visible="false"/>
-->
		<s:VGroup>
			<s:HGroup verticalAlign="middle">
				<s:Label text="Width:"/>
				<s:TextInput id="gridWidth" width="50" />
				<s:Label text="Height:"/>
				<s:TextInput id="gridHeight" width="50" />
				<s:Button label="Update" id="updateDimBtn" click="updateDimBtn_clickHandler(event)" />
			</s:HGroup>
			<s:Button label="Save as..." click="onSaveClick(event)"/>
			
			<instruments:InstrumentsPane id="instrPane" changeInstrument="onChangeInstrument(event)" />
			
<!--			<local:CellPropertiesPanel id="cellProp" paddingTop="50" />
-->			
		</s:VGroup>
		
		
	</s:HGroup>
	
</s:Application>
